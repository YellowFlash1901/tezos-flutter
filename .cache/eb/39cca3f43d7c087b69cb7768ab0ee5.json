{"id":"node_modules/@airgap/beacon-sdk/dist/matrix-client/MatrixClientEventEmitter.js","dependencies":[{"name":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\MatrixClientEventEmitter.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\package.json","includedInParent":true,"mtime":1632633242012},{"name":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\package.json","includedInParent":true,"mtime":1632638194064},{"name":"events","loc":{"line":17,"column":23},"parent":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\MatrixClientEventEmitter.js","resolved":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\events\\events.js"},{"name":"../utils/utils","loc":{"line":18,"column":22},"parent":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\MatrixClientEventEmitter.js","resolved":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\utils\\utils.js"},{"name":"./models/MatrixRoom","loc":{"line":19,"column":27},"parent":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\MatrixClientEventEmitter.js","resolved":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\models\\MatrixRoom.js"},{"name":"./models/MatrixClientEvent","loc":{"line":20,"column":34},"parent":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\MatrixClientEventEmitter.js","resolved":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\models\\MatrixClientEvent.js"}],"generated":{"js":"\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MatrixClientEventEmitter = void 0;\nvar events_1 = require(\"events\");\nvar utils_1 = require(\"../utils/utils\");\nvar MatrixRoom_1 = require(\"./models/MatrixRoom\");\nvar MatrixClientEvent_1 = require(\"./models/MatrixClientEvent\");\nvar MatrixClientEventEmitter = /** @class */ (function (_super) {\n    __extends(MatrixClientEventEmitter, _super);\n    function MatrixClientEventEmitter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.eventEmitProviders = new Map([\n            [MatrixClientEvent_1.MatrixClientEventType.INVITE, function () { return [_this.isInvite, _this.emitInvite.bind(_this)]; }],\n            [MatrixClientEvent_1.MatrixClientEventType.MESSAGE, function () { return [_this.isMessage, _this.emitMessage.bind(_this)]; }]\n        ]);\n        return _this;\n    }\n    MatrixClientEventEmitter.prototype.onStateChanged = function (_oldState, _newState, stateChange) {\n        for (var _i = 0, _a = utils_1.keys(MatrixClientEvent_1.MatrixClientEventType); _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            this.emitIfEvent(MatrixClientEvent_1.MatrixClientEventType[event_1], stateChange);\n        }\n    };\n    MatrixClientEventEmitter.prototype.emitIfEvent = function (eventType, object) {\n        var provider = this.eventEmitProviders.get(eventType);\n        if (provider) {\n            var _a = provider(), predicate = _a[0], emitter = _a[1];\n            if (predicate(object)) {\n                emitter(eventType, object);\n            }\n        }\n    };\n    MatrixClientEventEmitter.prototype.emitClientEvent = function (eventType, content) {\n        this.emit(eventType, {\n            type: eventType,\n            content: content\n        });\n    };\n    MatrixClientEventEmitter.prototype.isInvite = function (stateChange) {\n        return stateChange.rooms\n            ? stateChange.rooms.some(function (room) { return room.status === MatrixRoom_1.MatrixRoomStatus.INVITED; })\n            : false;\n    };\n    MatrixClientEventEmitter.prototype.emitInvite = function (eventType, stateChange) {\n        var _this = this;\n        stateChange.rooms\n            .filter(function (room) { return room.status === MatrixRoom_1.MatrixRoomStatus.INVITED; })\n            .map(function (room) { return room.id; })\n            .forEach(function (id) {\n            _this.emitClientEvent(eventType, {\n                roomId: id\n            });\n        });\n    };\n    MatrixClientEventEmitter.prototype.isMessage = function (stateChange) {\n        return stateChange.rooms ? stateChange.rooms.some(function (room) { return room.messages.length > 0; }) : false;\n    };\n    MatrixClientEventEmitter.prototype.emitMessage = function (eventType, stateChange) {\n        var _this = this;\n        stateChange.rooms\n            .filter(function (room) { return room.messages.length > 0; })\n            .map(function (room) {\n            return room.messages.map(function (message) { return [room.id, message]; });\n        })\n            .reduce(function (flatten, toFlatten) { return flatten.concat(toFlatten); }, [])\n            .forEach(function (_a) {\n            var roomId = _a[0], message = _a[1];\n            _this.emitClientEvent(eventType, {\n                roomId: roomId,\n                message: message\n            });\n        });\n    };\n    return MatrixClientEventEmitter;\n}(events_1.EventEmitter));\nexports.MatrixClientEventEmitter = MatrixClientEventEmitter;\n"},"sourceMaps":{"js":{"version":3,"file":"MatrixClientEventEmitter.js","sourceRoot":"","sources":["../../src/matrix-client/MatrixClientEventEmitter.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"812c0682db0533b25490912bd3bf08f1","cacheData":{"env":{}}}