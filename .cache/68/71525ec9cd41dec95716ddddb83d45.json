{"id":"node_modules/@airgap/beacon-sdk/dist/matrix-client/models/MatrixRoom.js","dependencies":[{"name":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\models\\MatrixRoom.js.map","includedInParent":true,"mtime":499162500000},{"name":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\package.json","includedInParent":true,"mtime":1632633242012},{"name":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\package.json","includedInParent":true,"mtime":1632638194064},{"name":"../utils/events","loc":{"line":11,"column":23},"parent":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\models\\MatrixRoom.js","resolved":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\utils\\events.js"},{"name":"./MatrixMessage","loc":{"line":12,"column":30},"parent":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\models\\MatrixRoom.js","resolved":"C:\\Users\\varda\\OneDrive\\Desktop\\tezos-web\\node_modules\\@airgap\\beacon-sdk\\dist\\matrix-client\\models\\MatrixMessage.js"}],"generated":{"js":"\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MatrixRoom = exports.MatrixRoomStatus = void 0;\nvar events_1 = require(\"../utils/events\");\nvar MatrixMessage_1 = require(\"./MatrixMessage\");\nvar MatrixRoomStatus;\n(function (MatrixRoomStatus) {\n    MatrixRoomStatus[MatrixRoomStatus[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n    MatrixRoomStatus[MatrixRoomStatus[\"JOINED\"] = 1] = \"JOINED\";\n    MatrixRoomStatus[MatrixRoomStatus[\"INVITED\"] = 2] = \"INVITED\";\n    MatrixRoomStatus[MatrixRoomStatus[\"LEFT\"] = 3] = \"LEFT\";\n})(MatrixRoomStatus = exports.MatrixRoomStatus || (exports.MatrixRoomStatus = {}));\nvar MatrixRoom = /** @class */ (function () {\n    function MatrixRoom(id, status, members, messages) {\n        if (status === void 0) { status = MatrixRoomStatus.UNKNOWN; }\n        if (members === void 0) { members = []; }\n        if (messages === void 0) { messages = []; }\n        this.id = id;\n        this.status = status;\n        this.members = members;\n        this.messages = messages;\n    }\n    MatrixRoom.fromSync = function (roomSync) {\n        function create(rooms, creator) {\n            return Object.entries(rooms).map(function (_a) {\n                var id = _a[0], room = _a[1];\n                return creator(id, room);\n            });\n        }\n        return __spreadArrays(create(roomSync.join, MatrixRoom.fromJoined), create(roomSync.invite, MatrixRoom.fromInvited), create(roomSync.leave, MatrixRoom.fromLeft));\n    };\n    MatrixRoom.from = function (roomOrId, status) {\n        return roomOrId instanceof MatrixRoom\n            ? status\n                ? new MatrixRoom(roomOrId.id, status, roomOrId.members, roomOrId.messages)\n                : roomOrId\n            : new MatrixRoom(roomOrId, status || MatrixRoomStatus.UNKNOWN);\n    };\n    MatrixRoom.merge = function (newState, previousState) {\n        if (!previousState || previousState.id !== newState.id) {\n            return MatrixRoom.from(newState);\n        }\n        return new MatrixRoom(newState.id, newState.status, __spreadArrays(previousState.members, newState.members).filter(function (member, index, array) { return array.indexOf(member) === index; }), __spreadArrays(previousState.messages, newState.messages));\n    };\n    MatrixRoom.fromJoined = function (id, joined) {\n        var events = __spreadArrays(joined.state.events, joined.timeline.events);\n        var members = MatrixRoom.getMembersFromEvents(events);\n        var messages = MatrixRoom.getMessagesFromEvents(events);\n        return new MatrixRoom(id, MatrixRoomStatus.JOINED, members, messages);\n    };\n    MatrixRoom.fromInvited = function (id, invited) {\n        var members = MatrixRoom.getMembersFromEvents(invited.invite_state.events);\n        return new MatrixRoom(id, MatrixRoomStatus.INVITED, members);\n    };\n    MatrixRoom.fromLeft = function (id, left) {\n        var events = __spreadArrays(left.state.events, left.timeline.events);\n        var members = MatrixRoom.getMembersFromEvents(events);\n        var messages = MatrixRoom.getMessagesFromEvents(events);\n        return new MatrixRoom(id, MatrixRoomStatus.LEFT, members, messages);\n    };\n    MatrixRoom.getMembersFromEvents = function (events) {\n        return MatrixRoom.getUniqueEvents(events.filter(function (event) { return events_1.isCreateEvent(event) || events_1.isJoinEvent(event); }))\n            .map(function (event) { return event.sender; })\n            .filter(function (member, index, array) { return array.indexOf(member) === index; });\n    };\n    MatrixRoom.getMessagesFromEvents = function (events) {\n        return MatrixRoom.getUniqueEvents(events.filter(events_1.isMessageEvent))\n            .map(function (event) { return MatrixMessage_1.MatrixMessage.from(event); })\n            .filter(function (message) { return !!message; });\n    };\n    MatrixRoom.getUniqueEvents = function (events) {\n        var eventIds = {};\n        var uniqueEvents = [];\n        events.forEach(function (event, index) {\n            var eventId = event.event_id;\n            if (eventId === undefined || !(eventId in eventIds)) {\n                if (eventId !== undefined) {\n                    eventIds[eventId] = index;\n                }\n                uniqueEvents.push(event);\n            }\n        });\n        return uniqueEvents;\n    };\n    return MatrixRoom;\n}());\nexports.MatrixRoom = MatrixRoom;\n"},"sourceMaps":{"js":{"version":3,"file":"MatrixRoom.js","sourceRoot":"","sources":["../../../src/matrix-client/models/MatrixRoom.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"9c6d6b6e8c42f57bfc6a6901fe0bf46d","cacheData":{"env":{}}}